These instructions assume VMware Service Mesh or Istio is already deployed to the cluster.

Create the namespace
kubectl create namespace planespotter

Enable the namespace for Istio
kubectl label namespace planespotter istio-injection=enabled

If not already done create the storage class
kubectl create -f storage_class.yaml

Create a persistent volume claim for mysql
kubectl create -f mysql_claim.yaml

Deploy the mysql pod
kubectl create -f mysql_pod.yaml

Deploy the appserver pod
kubectl create -f app-server-deployment_all_k8s.yaml

deploy the frontend
kubectl create -f frontend-deployment_all_k8s.yaml

Expose the deploymen
kubectl expose deployment planespotter-frontend \
--name=planespotter-frontend-lb --port=80 --target-port=80 --type=LoadBalancer --namespace=planespotter

Get the IP of the deployment
kubectl get service planespotter-frontend-lb -n planespotter

